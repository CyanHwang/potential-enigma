(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f8ea185"],{"2c98":function(e,t,a){},"4de3":function(e,t,a){"use strict";var l=a("2c98"),i=a.n(l);i.a},"8e6a":function(e,t,a){"use strict";var l=a("edc2"),i=a.n(l);i.a},a15b:function(e,t,a){"use strict";var l=a("23e7"),i=a("44ad"),o=a("fc6a"),n=a("a640"),s=[].join,r=i!=Object,c=n("join",",");l({target:"Array",proto:!0,forced:r||!c},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},c46c:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploadFileCon"},[a("el-upload",{ref:"upload",attrs:{action:e.uploadFileData.uploadSrc,"list-type":"picture-card",multiple:e.uploadFileData.multiple,"auto-upload":!1,limit:e.uploadFileData.limit,"file-list":e.uploadFileData.imgList,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"on-change":e.handleChange}},[a("i",{staticClass:"el-icon-plus"})]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadFileData.buttonState,expression:"uploadFileData.buttonState"}],staticStyle:{margin:"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.dialogImageUrl,expression:"dialogImageUrl"}],attrs:{width:"100%",alt:""}})])],1)},i=[],o={props:["uploadFileData"],data:function(){return{dialogImageUrl:"",dialogVisible:!1,fileList:[]}},methods:{handleRemove:function(e,t){},handleExceed:function(){this.$message({type:"warning",message:"文件不能超过".concat(this.uploadFileData.limit,"哦~")})},handleChange:function(e,t){this.fileList=t,"returnManagement"==this.uploadFileData.comName&&this.$store.commit("CHANGE_RETURNSHOP_IMGDATA",t),"imgList"==this.uploadFileData.comName&&this.$store.commit("CHANGE_IMGLIST_IMAGEDATA",t),"fileCom"==this.uploadFileData.comName&&this.$store.commit("CHNAGE_FILE_DATA",t)},submitUpload:function(){var e=new FormData,t=this;e.append("files",this.files);for(var a=0;a<t.fileList.length;a++){var l=t.fileList[a].raw;e.append("image[]",l)}this.imgRequest("/v1/upLoadimgs",e).then((function(e){})).catch((function(e){}))},handleSuccess:function(){}}},n=o,s=a("2877"),r=Object(s["a"])(n,l,i,!1,null,null,null);t["a"]=r.exports},dba6:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{placeholder:"账户",size:"mini"},on:{change:e.handleClickUId},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.accountList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)},i=[],o={data:function(){return{accountList:[],value:""}},methods:{getUserList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sessionStorage.getItem("userId");this.postRequest("/v1/merchantLists?u_id=".concat(t)).then((function(t){"200"==t.data.code&&(e.accountList=t.data.data)}))},handleClickUId:function(e){this.$store.commit("CHANGE_SELECT_USER_ID",e),sessionStorage.setItem("selectUId",e)}},created:function(){this.getUserList()}},n=o,s=a("2877"),r=Object(s["a"])(n,l,i,!1,null,null,null);t["a"]=r.exports},e966:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("myWorkOrderTop"),a("myWorkOrderMain")],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myWorkOrderTop"},[a("div",{staticClass:"searchCon"},[a("div",{staticClass:"inputCon"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索：名称，编码等...",value:e.inputValue,"suffix-icon":"el-icon-search"},on:{change:e.handleClick},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),a("span",{staticClass:"width8 disInlineBlock"},[a("el-select",{attrs:{placeholder:"请选择状态"},on:{change:e.handleChangeOne},model:{value:e.valueOne,callback:function(t){e.valueOne=t},expression:"valueOne"}},e._l(e.optionsOne,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("span",{staticClass:"width8 disInlineBlock"},[a("el-select",{attrs:{placeholder:"请选择类别"},on:{change:e.handleChangeTwo},model:{value:e.valueTwo,callback:function(t){e.valueTwo=t},expression:"valueTwo"}},e._l(e.optionsTwo,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("搜索")])],1)])},n=[],s=(a("dba6"),{data:function(){return{inputValue:"",searchValue:"",optionsOne:[{value:"0",label:"全部"},{value:"1",label:"未处理"},{value:"2",label:"已处理"}],valueOne:"",optionsTwo:[{value:"0",label:"全部"},{value:"1",label:"催单"},{value:"2",label:"物流"},{value:"3",label:"程序"},{value:"4",label:"取消订单"},{value:"5",label:"重寄"},{value:"6",label:"退款"},{value:"7",label:"其他"}],valueTwo:""}},methods:{handleChangeOne:function(e){this.$store.commit("CHANGE_MYWORKER_STATUS",e)},handleChangeTwo:function(e){this.$store.commit("CHANGE_MYWORKER_TYPES",e)},handleClick:function(){if(this.inputValue==this.searchValue)return!1;this.$store.commit("CHANGE_MYWORKER_TITLE",this.searchValue),this.searchValue=""}}}),r=s,c=(a("4de3"),a("2877")),u=Object(c["a"])(r,o,n,!1,null,"c4af147e",null),d=u.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mainCon"},[a("div",{staticClass:"mainTop"},[a("div",{staticClass:"mainTopLeft"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addWorkOrder}},[a("i",{staticClass:"el-icon-plus "}),e._v("添加")]),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.changeWorkOrder}},[a("i",{staticClass:"el-icon-edit "}),e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.deleteWorkOrder}},[a("i",{staticClass:"el-icon-close "}),e._v("删除")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.uploadFile}},[a("i",{staticClass:"iconfont icon_upload"}),e._v("上传附件")]),a("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"mini"}},[e._v("刷新")])],1),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[50,100,200],"page-size":50,"pager-count":e.pagerCount,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),a("div",{staticClass:"common"},[e._v("共"+e._s(e.count)+"笔")])],1),a("div",{staticClass:"mainBottom"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"79vh",stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"index","min-width":"50"}}),a("el-table-column",{attrs:{fixed:"",type:"selection",width:"55"}}),a("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":"",prop:"workorder_id",label:"单号","min-width":"50"}}),a("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":"",prop:"types_alias",label:"类别","min-width":"50"}}),a("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":"",prop:"title",label:"标题","min-width":"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"附件","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.downloadFile(t.row.attachment)}}},[e._v("下载")])]}}])}),a("el-table-column",{attrs:{prop:"describe","show-overflow-tooltip":"",label:"描述"}}),a("el-table-column",{attrs:{prop:"processing_opinion","show-overflow-tooltip":"",label:"处理意见","min-width":"100"}}),a("el-table-column",{attrs:{prop:"status_alias","show-overflow-tooltip":"",label:"状态","min-width":"100"}}),a("el-table-column",{attrs:{prop:"process_at","show-overflow-tooltip":"",label:"处理时间","min-width":"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"created_at",label:"创建时间","min-width":"100"}})],1)],1),a("el-dialog",{staticClass:"editWorkOrder1",attrs:{title:"编辑工单",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"标题","label-width":e.formLabelWidth,prop:"title"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"类别","label-width":e.formLabelWidth,prop:"types"}},[a("el-select",{attrs:{placeholder:"请选择类别"},on:{change:e.handleChange},model:{value:e.ruleForm.types,callback:function(t){e.$set(e.ruleForm,"types",t)},expression:"ruleForm.types"}},e._l(e.types,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth,prop:"describe"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入备注信息"},model:{value:e.ruleForm.describe,callback:function(t){e.$set(e.ruleForm,"describe",t)},expression:"ruleForm.describe"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑工单",visible:e.dialogFormVisibleTwo},on:{"update:visible":function(t){e.dialogFormVisibleTwo=t}}},[a("el-form",{ref:"ruleFormTwo",attrs:{model:e.ruleFormTwo,size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"标题","label-width":e.formLabelWidth,prop:"title"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleFormTwo.title,callback:function(t){e.$set(e.ruleFormTwo,"title",t)},expression:"ruleFormTwo.title"}})],1),a("el-form-item",{attrs:{label:"类别","label-width":e.formLabelWidth,prop:"types"}},[a("el-select",{attrs:{placeholder:"请选择类别"},on:{change:e.handleChange},model:{value:e.ruleFormTwo.types,callback:function(t){e.$set(e.ruleFormTwo,"types",t)},expression:"ruleFormTwo.types"}},e._l(e.types,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth,prop:"describe"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入备注信息"},model:{value:e.ruleFormTwo.describe,callback:function(t){e.$set(e.ruleFormTwo,"describe",t)},expression:"ruleFormTwo.describe"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisibleTwo=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitFormTwo("ruleFormTwo")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加附件",visible:e.dialogImageVisible,center:""},on:{"update:visible":function(t){e.dialogImageVisible=t},close:e.cancelAdd}},[a("uploadFileCom",{attrs:{uploadFileData:e.uploadFileConOne}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelAdd}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addImgList}},[e._v("确 定")])],1)],1)],1)},p=[],h=(a("4160"),a("a15b"),a("159b"),a("c46c")),f={data:function(){var e=function(e,t,a){""===t?a(new Error("请输入标题")):a()},t=function(e,t,a){""===t?a(new Error("请选择类型")):a()},a=function(e,t,a){""===t?a(new Error("请输入备注信息")):a()};return{total:0,count:120,currentPage:1,pagerCount:5,dialogImageVisible:!1,uploadFileConOne:{limit:1,uploadSrc:"/v1/attachmentUpload",multiple:!1,buttonState:!1,imgList:[],comName:"fileCom"},uploadFileData:"",dialogFormVisible:!1,dialogFormVisibleTwo:!1,tableData:[],multipleSelection:[],activeName:"first",ruleForm:{title:"",types:"",describe:""},ruleFormTwo:{title:"",types:"",describe:"",id:""},addRuleForm:{},changeRuleForm:{},formLabelWidth:"100px",types:[{value:"1",label:"催单"},{value:"2",label:"物流"},{value:"3",label:"程序"},{value:"4",label:"取消订单"},{value:"5",label:"重寄"},{value:"6",label:"退款"},{value:"7",label:"其他"}],rules:{title:[{validator:e,trigger:"blur"}],types:[{validator:t,trigger:"change"}],describe:[{validator:a,trigger:"blur"}]},tableLoading:!1}},components:{uploadFileCom:h["a"]},methods:{uploadFile:function(){1!=this.multipleSelection.length?this.$message({type:"warning",message:"选择一条记录进行上传"}):this.dialogImageVisible=!0},cancelAdd:function(){this.dialogImageVisible=!1,this.$store.commit("CHNAGE_FILE_DATA","")},addImgList:function(){var e=this,t=new FormData;t.append("attachment",this.uploadFileData[0].raw),this.imgRequest("/v1/attachmentUpload?id=".concat(this.multipleSelection[0].id),t).then((function(t){"200"==t.data.code&&(e.$message({type:"success",message:"上传成功"}),e.cancelAdd(),e.initData())}))},downloadFile:function(e){window.location.href=e},addWorkOrder:function(){this.dialogFormVisible=!0},changeWorkOrder:function(){1!=this.multipleSelection.length?this.$message({message:"请选择一条记录进行修改",type:"warning"}):(this.dialogFormVisibleTwo=!0,this.ruleFormTwo.id=this.multipleSelection[0].id,this.ruleFormTwo.title=this.multipleSelection[0].title,this.ruleFormTwo.types=this.multipleSelection[0].types,this.ruleFormTwo.describe=this.multipleSelection[0].describe)},deleteWorkOrder:function(){var e=this;if(this.multipleSelection.length<=0)this.$message({message:"请选择需要删除的工单",type:"warning"});else{for(var t=[],a=0;a<this.multipleSelection.length;a++){var l=this.multipleSelection[a];t.push(l.id)}t=t.join(","),this.postRequest("/v1/workOrderDelete?id=".concat(t)).then((function(t){"1"==t.data.data?(e.$message({message:"删除成功",type:"success"}),e.initData()):e.$message.error("删除失败")})).catch((function(e){}))}},handleChange:function(e){},handleSizeChange:function(e){this.$store.commit("CHANGE_MYWORKER_LIMIT",e)},handleCurrentChange:function(e){this.$store.commit("CHANGE_MYWORKER_PAGE",e)},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},submitForm:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sessionStorage.getItem("selectUId");this.$refs[e].validate((function(e){if(!e)return!1;t.postRequest("/v1/workorderAdd?u_id=".concat(a),t.ruleForm).then((function(e){"1"==e.data.data?(t.dialogFormVisible=!1,t.$message({message:"添加成功",type:"success"}),t.initData()):(t.dialogFormVisible=!1,t.$message.error("添加失败"))})).catch((function(e){}))}))},submitFormTwo:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.postRequest("/v1/workOrderEdit",t.ruleFormTwo).then((function(e){"1"==e.data.data?(t.dialogFormVisibleTwo=!1,t.$message({message:"修改成功",type:"success"}),t.initData()):(t.dialogFormVisibleTwo=!1,t.$message.error("修改失败"))})).catch((function(e){}))}))},initData:function(){var e=this;this.tableLoading=!0,this.postRequest("/v1/workorderList",this.$store.state.myWorkOrderData).then((function(t){e.tableData=t.data.data.data,e.total=t.data.data.total,e.count=t.data.data.count,e.tableLoading=!1})).catch((function(e){}))}},created:function(){this.initData()},computed:{limit:function(){return this.$store.state.myWorkOrderData.limit},title:function(){return this.$store.state.myWorkOrderData.title},status:function(){return this.$store.state.myWorkOrderData.status},typesState:function(){return this.$store.state.myWorkOrderData.types},page:function(){return this.$store.state.myWorkOrderData.page},fileData:function(){return this.$store.state.fileData}},watch:{limit:function(e,t){this.initData()},title:function(e,t){this.initData()},status:function(e,t){this.initData()},typesState:function(e,t){this.initData()},page:function(e,t){this.initData()},fileData:function(e,t){this.uploadFileData=e}}},b=f,g=(a("8e6a"),Object(c["a"])(b,m,p,!1,null,"ba6b5c82",null)),v=g.exports,w={components:{myWorkOrderTop:d,myWorkOrderMain:v}},F=w,y=Object(c["a"])(F,l,i,!1,null,null,null);t["default"]=y.exports},edc2:function(e,t,a){}}]);
//# sourceMappingURL=chunk-0f8ea185.a300bee1.js.map