(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f83b6f78"],{"18a6":function(e,t,i){"use strict";var a=i("66cb"),r=i.n(a);r.a},"1bb6":function(e,t,i){"use strict";var a=i("b10b"),r=i.n(a);r.a},"25f0":function(e,t,i){"use strict";var a=i("6eeb"),r=i("825a"),n=i("d039"),s=i("ad6d"),o="toString",l=RegExp.prototype,c=l[o],u=n((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&a(RegExp.prototype,o,(function(){var e=r(this),t=String(e.source),i=e.flags,a=String(void 0===i&&e instanceof RegExp&&!("flags"in l)?s.call(e):i);return"/"+t+"/"+a}),{unsafe:!0})},"66cb":function(e,t,i){},a15b:function(e,t,i){"use strict";var a=i("23e7"),r=i("44ad"),n=i("fc6a"),s=i("a640"),o=[].join,l=r!=Object,c=s("join",",");a({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(n(this),void 0===e?",":e)}})},ad6d:function(e,t,i){"use strict";var a=i("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b10b:function(e,t,i){},cd2b:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"selfServiceOrder"},[i("mainRight")],1)},r=[],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mainCon selefService"},[i("div",{staticClass:"mainTop"},[i("div",{staticClass:"mainTopLeft"},[i("div",{staticStyle:{height:"1.5vh",width:"100%",background:"#f1f1f1"}}),i("div",{staticClass:"orderList",staticStyle:{padding:"5px 10px","border-top-left-radius":"5px","border-top-right-radius":"5px"}},[e._v("备选商品列表")]),i("div",{staticClass:"orderList"},[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.handleClickAddShop}},[i("i",{staticClass:"el-icon-plus "}),e._v("添加")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.handleClickDetailShop}},[i("i",{staticClass:"el-icon-close "}),e._v("删除")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleClickOrder}},[i("i",{staticClass:"iconfont icon_queshengyeicon_gouwuche "}),e._v("下单")]),i("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"mini"},on:{click:e.handleClickRefresh}},[e._v("刷新")])],1),i("div",{staticStyle:{position:"absolute",bottom:"-5px!important",right:"20px"}},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[50,100,200],"page-size":e.pageSize,"pager-count":e.pagerCount,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),i("div",{staticClass:"common"},[e._v("共"+e._s(e.total)+"笔")])],1)])]),i("div",{staticClass:"mainBottom"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"97%","margin-left":"10px","margin-right":"15px","margin-top":"10px","min-height":"80.5vh"},attrs:{data:e.tableData,"highlight-current-row":!0,stripe:""},on:{"selection-change":e.handleSelectionChange,"row-dblclick":e.handleDBClick}},[i("el-table-column",{staticStyle:{"z-index":"1!important"},attrs:{fixed:"",type:"index","min-width":"50"}}),i("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),i("el-table-column",{attrs:{prop:"date",label:"图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{directives:[{name:"show",rawName:"v-show",value:t.row.goods_imgs.length>0,expression:"scope.row.goods_imgs.length>0"}]},[i("el-tooltip",{attrs:{placement:"right-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bigImgSrc,expression:"bigImgSrc"}],staticClass:"bigImgCon",attrs:{alt:"",srcset:""}})]),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.row.goods_imgs[0].path,expression:"scope.row.goods_imgs[0].path"}],ref:"user_image",attrs:{alt:"",srcset:""},on:{mouseover:function(i){return e.mouseover(t.row.goods_imgs)},mousewheel:function(i){return e.wheel(t.row.goods_imgs)}}})])],1)]}}])}),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"商品标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(" "+e._s(t.row.goods_name)+" "),i("span",[e._v("货号："+e._s(t.row.goods_code))])]),i("p",[e._v("颜色： "),i("span",[e._v(e._s(t.row.goods_size.color))])]),i("p",[e._v("规格： "),i("span",[e._v(e._s(t.row.goods_size.size))])])]}}])}),i("el-table-column",{attrs:{label:"重量（KG）","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(e._s(t.row.goods_size.weight))])]}}])}),i("el-table-column",{attrs:{label:"单价","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",[e._v(e._s(t.row.goods_size.msrp))])]}}])}),i("el-table-column",{attrs:{label:"状态","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上架",placement:"top"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:2==e.row.alternative_status,expression:"scope.row.alternative_status==2"}],staticClass:"el-icon-check colorGreen"})]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"未上架",placement:"top"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:2==!e.row.alternative_status,expression:"!scope.row.alternative_status==2"}],staticClass:"el-icon-close colorRed"})])]}}])})],1),i("el-dialog",{attrs:{title:"添加待选商品SKU",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,size:"mini"}},[i("el-form-item",{attrs:{label:"",prop:"textarea"}},[i("el-input",{attrs:{type:"textarea",rows:"5",resize:"none",autocomplete:"off",placeholder:"请以逗号分开"},model:{value:e.form.textarea,callback:function(t){e.$set(e.form,"textarea",t)},expression:"form.textarea"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleSubmitSku("form")}}},[e._v("确 定")])],1)],1)],1)])},s=[],o=(i("4160"),i("a15b"),i("159b"),i("96cf"),i("1da1")),l=0,c={data:function(){return{dialogFormVisible:!1,loading:!1,currentPage:1,pagerCount:5,pageSize:50,total:0,form:{textarea:""},formRules:{textarea:[{required:!0,message:"SKU为必选字段"}]},rules:{name:[{required:!0,message:"标题不能为空"}]},tableData:[],bigImgSrc:"",multipleSelection:[],multipleSelectionId:[],activeName:"first",ruleForm:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",switchValue:!0}}},methods:{handleClose:function(){this.dialogFormVisible=!1,this.form.textarea=""},handleSubmitSku:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=12;break}return e.next=3,t.api.goodsAlternativeAdd({sku:"".concat(t.form.textarea)});case 3:a=e.sent,"200"==a.data.code&&t.$message({type:"success",message:"添加成功"}),"201"==a.data.code&&t.$message.error("添加失败"),"202"==a.data.code&&t.$message({type:"warning",message:"该sku已存在于被选商品列表"}),t.dialogFormVisible=!1,t.form.textarea="",t.initData(t.currentPage,t.pageSize),e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleSizeChange:function(e){this.currentPage=e,this.initData(this.currentPage,this.pageSize)},handleCurrentChange:function(e){this.pageSize=e,this.initData(this.currentPage,this.pageSize)},handleClickAddShop:function(){this.dialogFormVisible=!0},delPro:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.api.goodsAlternativeDelete({sku:e});case 2:a=i.sent,"200"==a.data.code&&(t.$message({type:"success",message:"删除成功"}),t.initData(t.currentPage,t.pageSize));case 4:case"end":return i.stop()}}),i)})))()},handleClickDetailShop:function(){this.handleSKU(this.multipleSelection);var e="";this.multipleSelectionId.length>0?(e=this.multipleSelectionId.join(","),this.delPro(e)):this.$message({message:"请选择商品进行删除",type:"warning"})},handleClickOrder:function(){this.handleId(this.multipleSelection);var e="";this.multipleSelectionId.length>0?(e=this.multipleSelectionId.join(","),this.addClickOrder(e)):this.$message({message:"请选择商品进行下单",type:"warning"})},addClickOrder:function(e){var t=arguments,i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.length>1&&void 0!==t[1]?t[1]:sessionStorage.getItem("selectUId"),a.next=3,i.api.goodsAddCart({goods_id:e});case 3:r=a.sent,i.$store.commit("CHANGE_SELF_SERVICE_STATE"),"1"==r.data.data?i.$message({message:"添加成功",type:"success"}):i.$message.error("添加失败");case 6:case"end":return a.stop()}}),a)})))()},handleDBClick:function(e){this.addClickOrder(e.id)},handleClickRefresh:function(){this.initData(this.currentPage,this.pageSize)},wheel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:event;this.bodyMouseWheel(t),(t.wheelDelta>0||t.detail>0)&&(e.length>=l&&l>=0&&(this.bigImgSrc=e[l].path,l--),-1==l&&(l=3)),(t.wheelDelta<0||t.detail<0)&&(e.length>l&&(this.bigImgSrc=e[l].path,l++),e.length==l&&(l=0))},mouseover:function(e){this.bigImgSrc=e[0].path},bodyMouseWheel:function(e){e.preventDefault()},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleId:function(e){for(var t in this.multipleSelectionId=[],e)if(e.hasOwnProperty(t)){var i=e[t];this.multipleSelectionId.push(i.id)}},handleSKU:function(e){for(var t in this.multipleSelectionId=[],e)if(e.hasOwnProperty(t)){var i=e[t];this.multipleSelectionId.push(i.sku)}},initData:function(e,t){var i=arguments,a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i.length>2&&void 0!==i[2]?i[2]:sessionStorage.getItem("selectUId"),a.loading=!0,r.next=4,a.api.goodsAlternative({page:e,limit:t});case 4:n=r.sent,200==n.data.code?(a.tableData=n.data.data.data,a.total=n.data.data.total,a.bigImgSrc=n.data.data.data[0]?n.data.data.data[0].goods_imgs[0].path:"",a.loading=!1):a.errorMess("获取备选商品列表失败");case 6:case"end":return r.stop()}}),r)})))()},handleSelectionChange:function(e){for(var t in this.multipleSelection=[],e)if(e.hasOwnProperty(t)){var i=e[t];for(var a in this.multipleSelection.push(i),i.sub_goods)if(i.sub_goods.hasOwnProperty(a)){var r=i.sub_goods[a];this.multipleSelection.push(r)}}}},beforeMount:function(){this.initData(this.currentPage,this.pageSize)},components:{}},u=c,d=(i("18a6"),i("2877")),g=Object(d["a"])(u,n,s,!1,null,"4b95c231",null),m=g.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mainCon selefService"},[i("div",{staticClass:"mainTop"},[i("div",{staticClass:"mainRight"},[i("div",{staticClass:"orderList"},[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.clickDelCart}},[i("i",{staticClass:"el-icon-close "}),e._v("删除")]),i("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"mini"},on:{click:e.handleClickRefresh}},[e._v("刷新")])],1),i("div",{staticStyle:{position:"absolute",bottom:"-5px!important",right:"30px"}},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[50,100,200],"page-size":e.pageSize,"pager-count":e.pagerCount,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),i("div",{staticClass:"common"},[e._v("共"+e._s(e.total)+"笔")])],1)])]),i("div",{staticClass:"mainBottom"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"47vh"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{fixed:"",type:"index",align:"center","min-width":"50"}}),i("el-table-column",{attrs:{fixed:"",type:"selection",align:"center",width:"50"}}),i("el-table-column",{attrs:{prop:"date",label:"图片",align:"center","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?i("span",[i("el-tooltip",{attrs:{placement:"right-start"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bigImgSrc,expression:"bigImgSrc"}],staticClass:"bigImgCon",attrs:{alt:"",srcset:""}})]),0!==t.row.goods_imgs.length?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.row.goods_imgs[0].path,expression:"scope.row.goods_imgs[0].path"}],ref:"user_image",attrs:{alt:"",srcset:""},on:{mouseover:function(i){return e.mouseover(t.row.goods_imgs)},mousewheel:function(i){return e.wheel(t.row.goods_imgs)}}}):e._e()])],1):e._e()]}}])}),i("el-table-column",{attrs:{prop:"goods_name","show-overflow-tooltip":"",align:"center",label:"商品标题"}}),i("el-table-column",{attrs:{prop:"goods_weight",label:"重量（KG）","show-overflow-tooltip":"",align:"center","min-width":"90"}}),i("el-table-column",{attrs:{prop:"goods_price",label:"单价",align:"center","show-overflow-tooltip":"","min-width":"55"}}),i("el-table-column",{attrs:{prop:"productNumber",label:"数量",align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{attrs:{size:"small",min:0,max:999999999,value:t.row.goods_num},on:{change:function(i){return e.handleChange(t.row.goods_num,t.row.id)}},model:{value:t.row.goods_num,callback:function(i){e.$set(t.row,"goods_num",i)},expression:"scope.row.goods_num"}})]}}])})],1),i("div",{staticStyle:{height:"1.5vh",width:"100%",background:"#f1f1f1"}}),i("div",{staticClass:"mainRightBottom"},[i("el-form",{ref:"ruleForm",attrs:{model:e.sizeForm,rules:e.rules,"label-width":"80px",size:"mini","inline-message":!0}},[i("el-form-item",{staticClass:"marginBottm5 lineHeight20 textLeft",attrs:{"label-width":"10px",size:"large"}},[e._v(" (商品合计："),i("span",{staticClass:"colorRed"},[e._v(e._s(parseInt(e.price).toFixed(2)))]),e._v(" + 快递费用："),i("span",{staticClass:"colorRed"},[e._v(e._s(parseInt(e.priceTwo).toFixed(2)))]),e._v(" = 订单总额："),i("span",{staticClass:"colorRed"},[e._v(e._s(parseInt(e.price+e.priceTwo).toFixed(2)))]),e._v(") ")]),i("el-form-item",{staticClass:"width37 disInlineBlock marginBottm10",attrs:{label:"送达地区",required:"",prop:"country"}},[i("el-select",{attrs:{placeholder:"送达国家"},on:{change:function(t){return e.countryChange(e.sizeForm.country)}},model:{value:e.sizeForm.country,callback:function(t){e.$set(e.sizeForm,"country",t)},expression:"sizeForm.country"}},e._l(e.countryList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.zone_name,value:e.zone_id}})})),1)],1),i("el-form-item",{staticClass:"width20 disInlineBlock marginBottm10 onlyFormItem",attrs:{label:"","label-width":"0px",required:"",prop:"province"}},[i("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择省份"},model:{value:e.sizeForm.province,callback:function(t){e.$set(e.sizeForm,"province",t)},expression:"sizeForm.province"}},e._l(e.cityList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.zone_name,value:e.zone_name}})})),1)],1),i("el-form-item",{staticClass:"width40 disInlineBlock marginBottm10",attrs:{label:"城市",prop:"city"}},[i("el-input",{attrs:{placeholder:"请输入城市名称"},model:{value:e.sizeForm.city,callback:function(t){e.$set(e.sizeForm,"city",t)},expression:"sizeForm.city"}})],1),i("el-form-item",{staticClass:"width58 disInlineBlock marginBottm10",attrs:{label:"详细地址",prop:"address"}},[i("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.sizeForm.address,callback:function(t){e.$set(e.sizeForm,"address",t)},expression:"sizeForm.address"}})],1),i("el-form-item",{staticClass:"width40 disInlineBlock marginBottm10",attrs:{label:"邮编",prop:"zipcode"}},[i("el-input",{attrs:{placeholder:"请输入邮编"},model:{value:e.sizeForm.zipcode,callback:function(t){e.$set(e.sizeForm,"zipcode",t)},expression:"sizeForm.zipcode"}})],1),i("el-form-item",{staticClass:"width58 disInlineBlock marginBottm10",attrs:{label:"收件人",prop:"consignee"}},[i("el-input",{attrs:{placeholder:"请输入收件人"},model:{value:e.sizeForm.consignee,callback:function(t){e.$set(e.sizeForm,"consignee",t)},expression:"sizeForm.consignee"}})],1),i("el-form-item",{staticClass:"width40 disInlineBlock marginBottm10",attrs:{label:"电话"}},[i("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.sizeForm.mobile,callback:function(t){e.$set(e.sizeForm,"mobile",t)},expression:"sizeForm.mobile"}})],1),i("el-form-item",{staticClass:"width58 disInlineBlock marginBottm10",attrs:{label:"订单号",prop:"order_sn"}},[i("el-input",{attrs:{value:e.sizeForm.order_sn,placeholder:"为防止重复下单，请输入（amazon,wish）的订单号"},on:{change:e.orderChange},model:{value:e.sizeForm.order_sn,callback:function(t){e.$set(e.sizeForm,"order_sn",t)},expression:"sizeForm.order_sn"}})],1),i("el-form-item",{staticClass:"width40 disInlineBlock marginBottm10",attrs:{label:"物流",prop:"shipping_code"}},[i("el-select",{attrs:{placeholder:"请选择物流公司"},on:{change:e.logisticsChange},model:{value:e.sizeForm.shipping_code,callback:function(t){e.$set(e.sizeForm,"shipping_code",t)},expression:"sizeForm.shipping_code"}},e._l(e.logisticsList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.logistics_name,value:e.id}})})),1)],1),i("el-form-item",{staticClass:"marginBottm10",attrs:{label:"订单备注"}},[i("el-input",{attrs:{type:"textarea",placeholder:"如果有特殊情况，请详细备注！"},model:{value:e.sizeForm.user_note,callback:function(t){e.$set(e.sizeForm,"user_note",t)},expression:"sizeForm.user_note"}})],1),i("el-form-item",{staticClass:"marginBottm5 lineHeight20 textCenter marginRight10",attrs:{size:"large"}},[i("el-button",{attrs:{type:"primary",size:"mini"}},[i("i",{staticClass:"iconfont icon_chakan"}),e._v("查看生产图")]),i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm")}}},[i("i",{staticClass:" el-icon-check"}),e._v("提交订单")])],1)],1)],1)],1)])},h=[],f=(i("99af"),i("4de4"),i("d3b7"),i("25f0"),0),v={data:function(){var e=function(e,t,i){""===t?i(new Error("请填写订单号")):i()};return{loading:!1,currentPage:1,pagerCount:5,pageSize:50,total:0,shopNumber:10,bigImgSrc:"",tableData:[],multipleSelection:[],activeName:"first",countryList:[],cityList:[],logisticsList:[],sizeForm:{address:"",city:"",country:"",consignee:"",goods_id:[],mobile:"",order_sn:"",province:"",shipping_price:0,total_amount:"",zipcode:"",user_note:"",shipping_code:""},price:0,priceTwo:0,rules:{country:[{required:!0,message:"请选择国家",trigger:"change"}],province:[{required:!0,message:"请选择城市",trigger:"change"}],city:[{required:!0,message:"请填写城市",trigger:"blur"}],address:[{required:!0,message:"请填写详细地址",trigger:"blur"}],consignee:[{required:!0,message:"请填写收件人",trigger:"blur"}],order_sn:[{required:!0,validator:e,trigger:"blur"}],shipping_code:[{required:!0,message:"请选择物流公司",trigger:"change"}]}}},methods:{handleSizeChange:function(e){this.currentPage=e,this.initData(this.pageSize,this.currentPage)},handleCurrentChange:function(e){this.pageSize=e,this.initData(this.pageSize,this.currentPage)},handleChange:function(e,t){this.addShop(e,t)},countryChange:function(e){this.getCity(e)},logisticsChange:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=t.logisticsList.filter((function(t){return t.id==e})),t.postRequest("/v1/goodsPostagetotal?courier_id=".concat(a[0].id,"&country_id=").concat(a[0].zone_id)).then((function(e){"200"==e.data.code&&(t.priceTwo=e.data.data,t.sizeForm.shipping_price=e.data.data)})).catch((function(e){}));case 2:case"end":return i.stop()}}),i)})))()},orderChange:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(""==e){i.next=13;break}return i.next=3,t.api.goodsSn({order_sn:e});case 3:if(a=i.sent,"0"!=a.data.data){i.next=10;break}t.$message.error("订单号已存在，请重新填写"),t.sizeForm.order_sn="",t.$refs.ruleForm.validateField("order_sn"),i.next=11;break;case 10:return i.abrupt("return",!1);case 11:i.next=14;break;case 13:return i.abrupt("return",!1);case 14:case"end":return i.stop()}}),i)})))()},addShop:function(e,t){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i.api.goodsNumber({cart_id:t,goods_num:e});case 2:r=a.sent,"1"==r.data.data.status&&(i.price=r.data.data.sum),"3"==r.data.data.status&&i.initData(i.pageSize,i.currentPage),"4"==r.data.data.status&&(i.initData(i.pageSize,i.currentPage),i.price=0);case 6:case"end":return a.stop()}}),a)})))()},clickDelCart:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var i,a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=[],!(e.multipleSelection.length>0)){t.next=7;break}for(a in e.multipleSelection)e.multipleSelection.hasOwnProperty(a)&&(r=e.multipleSelection[a],i.push(r.id));return t.next=5,e.api.CartDelete({id:"".concat(i.toString())});case 5:n=t.sent,"200"==n.data.code?(e.handleClickRefresh(),e.$message({type:"success",message:"删除成功"})):e.errorMess("删除失败");case 7:case"end":return t.stop()}}),t)})))()},handleClickRefresh:function(){this.loading=!0,this.initData(this.pageSize,this.currentPage),this.initCountryCity(),this.loading=!1},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.postOrder()}))},postOrder:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,r,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.length>0&&void 0!==e[0]?e[0]:sessionStorage.getItem("selectUId"),!(t.multipleSelection.length>0)){i.next=9;break}for(a in t.sizeForm.goods_id=[],t.multipleSelection)t.multipleSelection.hasOwnProperty(a)&&(r=t.multipleSelection[a],t.sizeForm.goods_id.push(r.goods_id));return t.sizeForm.goods_id=t.sizeForm.goods_id.join(","),i.next=7,t.api.goodsAddOrder(t.sizeForm);case 7:n=i.sent,"1"==n.data.data?(t.$message({message:"下单成功",type:"success"}),t.initData(t.pageSize,t.currentPage),t.sizeForm={address:"",city:"",country:"",consignee:"",goods_id:[],mobile:"",order_sn:"",province:"",shipping_price:0,total_amount:"",zipcode:"",user_note:"",shipping_code:""},t.multipleSelection=[]):t.$message.error("下单失败");case 9:case"end":return i.stop()}}),i)})))()},initData:function(e,t){var i=arguments,a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i.length>2&&void 0!==i[2]?i[2]:sessionStorage.getItem("selectUId"),a.loading=!0,r.next=4,a.api.cartLists({limit:e,page:t});case 4:if(n=r.sent,200==n.data.code){for(a.tableData=n.data.data.goods_orders.data,a.total=n.data.data.goods_orders.total,a.bigImgSrc=n.data.data.goods_orders.data[0]?n.data.data.goods_orders.data[0].goods_imgs[0].path:"",a.multipleSelection=[],s=0;s<n.data.data.goods_orders.data.length;s++)o=n.data.data.goods_orders.data[s],a.multipleSelection.push(o);a.sizeForm.goods_num=n.data.data.count,a.price=n.data.data.sum,a.loading=!1}case 6:case"end":return r.stop()}}),r)})))()},initCountryCity:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.api.goodsCoutry();case 2:i=t.sent,200==i.data.code&&(e.countryList=i.data.data);case 4:case"end":return t.stop()}}),t)})))()},getCity:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.api.goodsCity({country_id:e});case 2:a=i.sent,200==a.data.code?(t.cityList=a.data.data.data,t.logisticsList=a.data.data.logistics,0!=a.data.data.data.length?t.sizeForm.province=a.data.data.data[0].zone_name:t.sizeForm.province="",0!=a.data.data.logistics.length?(t.sizeForm.shipping_code=a.data.data.logistics[0].id,t.logisticsChange(t.sizeForm.shipping_code)):(t.sizeForm.shipping_code="",t.priceTwo=0)):t.errorMess("获取城市列表失败");case 4:case"end":return i.stop()}}),i)})))()},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},wheel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:event;this.bodyMouseWheel(t),(t.wheelDelta>0||t.detail>0)&&(e.length>=f&&f>=0&&(this.bigImgSrc=e[f].path,f--),-1==f&&(f=3)),(t.wheelDelta<0||t.detail<0)&&(e.length>f&&(this.bigImgSrc=e[f].path,f++),e.length==f&&(f=0))},bodyMouseWheel:function(e){e.preventDefault()},mouseover:function(e){this.bigImgSrc=e[0].path},handleSelectionChange:function(e){this.multipleSelection=e}},beforeMount:function(){this.initData(this.pageSize,this.currentPage),this.initCountryCity()},computed:{selfServiceOrderState:function(){return this.$store.state.selfServiceOrderState}},watch:{selfServiceOrderState:function(){this.initData(this.pageSize,this.currentPage)},tableData:{handler:function(e){""!==this.sizeForm.province&&this.logisticsChange(this.sizeForm.shipping_code)},deep:!0},"sizeForm.province":function(){this.logisticsChange(this.sizeForm.shipping_code)}},components:{}},b=v,_=(i("1bb6"),Object(d["a"])(b,p,h,!1,null,"c5224ae2",null)),w=_.exports,z={components:{mainLeft:m,mainRight:w}},S=z,C=Object(d["a"])(S,a,r,!1,null,null,null);t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-f83b6f78.70116aaf.js.map