(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-500aa58f"],{2174:function(e,t,a){"use strict";var i=a("47e4"),s=a.n(i);s.a},"47e4":function(e,t,a){},"747e":function(e,t,a){},"86f6":function(e,t,a){"use strict";var i=a("747e"),s=a.n(i);s.a},a15b:function(e,t,a){"use strict";var i=a("23e7"),s=a("44ad"),l=a("fc6a"),o=a("a640"),r=[].join,n=s!=Object,u=o("join",",");i({target:"Array",proto:!0,forced:n||!u},{join:function(e){return r.call(l(this),void 0===e?",":e)}})},c46c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploadFileCon"},[a("el-upload",{ref:"upload",attrs:{action:e.uploadFileData.uploadSrc,"list-type":"picture-card",multiple:e.uploadFileData.multiple,"auto-upload":!1,limit:e.uploadFileData.limit,"file-list":e.uploadFileData.imgList,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"on-change":e.handleChange}},[a("i",{staticClass:"el-icon-plus"})]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadFileData.buttonState,expression:"uploadFileData.buttonState"}],staticStyle:{margin:"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.dialogImageUrl,expression:"dialogImageUrl"}],attrs:{width:"100%",alt:""}})])],1)},s=[],l={props:["uploadFileData"],data:function(){return{dialogImageUrl:"",dialogVisible:!1,fileList:[]}},methods:{handleRemove:function(e,t){},handleExceed:function(){this.$message({type:"warning",message:"文件不能超过".concat(this.uploadFileData.limit,"哦~")})},handleChange:function(e,t){this.fileList=t,"returnManagement"==this.uploadFileData.comName&&this.$store.commit("CHANGE_RETURNSHOP_IMGDATA",t),"imgList"==this.uploadFileData.comName&&this.$store.commit("CHANGE_IMGLIST_IMAGEDATA",t),"fileCom"==this.uploadFileData.comName&&this.$store.commit("CHNAGE_FILE_DATA",t)},submitUpload:function(){var e=new FormData,t=this;e.append("files",this.files);for(var a=0;a<t.fileList.length;a++){var i=t.fileList[a].raw;e.append("image[]",i)}this.imgRequest("/v1/upLoadimgs",e).then((function(e){})).catch((function(e){}))},handleSuccess:function(){}}},o=l,r=a("2877"),n=Object(r["a"])(o,i,s,!1,null,null,null);t["a"]=n.exports},d5ea:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"calc(100vh - 8em)"}},[a("returnsManagementTop"),a("returnsManagementMain")],1)},s=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myWorkOrderTop"},[a("div",{staticClass:"searchCon"},[a("div",{staticClass:"inputCon"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入SKU",value:e.inputValue,"suffix-icon":"el-icon-search"},on:{change:e.handleClick},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)])])},o=[],r=(a("dba6"),{data:function(){return{inputValue:"",searchValue:""}},methods:{handleClick:function(){if(this.inputValue==this.searchValue)return!1;this.$store.commit("CHANGE_RETURNSHOP_SKU",this.searchValue),this.searchValue=""}}}),n=r,u=(a("86f6"),a("2877")),c=Object(u["a"])(n,l,o,!1,null,"33c53af6",null),m=c.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mainCon"},[a("div",{staticClass:"mainTop"},[a("div",{staticClass:"mainTopLeft"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addWorkOrder}},[a("i",{staticClass:"el-icon-plus "}),e._v("添加")]),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.changeWorkOrder}},[a("i",{staticClass:"el-icon-edit "}),e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.deleteWorkOrder}},[a("i",{staticClass:"el-icon-close "}),e._v("删除")]),a("el-button",{attrs:{type:"success",icon:"el-icon-refresh",size:"mini"}},[e._v("刷新")])],1),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[50,100,200],"page-size":50,"pager-count":e.pagerCount,layout:"sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),a("div",{staticClass:"common"},[e._v("共"+e._s(e.productNum)+"笔")])],1),a("div",{staticClass:"mainBottom"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"index","min-width":"50"}}),a("el-table-column",{attrs:{fixed:"",type:"selection",width:"55"}}),a("el-table-column",{attrs:{fixed:"",prop:"goods_name",label:"商品名称","min-width":"100"}}),a("el-table-column",{attrs:{fixed:"",label:"商品图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.goods_imgs.length>0,expression:"scope.row.goods_imgs.length>0"}]},[a("el-tooltip",{attrs:{placement:"right-start",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bigImgSrc,expression:"bigImgSrc"}],staticClass:"bigImgCon",attrs:{alt:"",srcset:""}})]),t.row.goods_imgs[0]?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.row.goods_imgs[0].path,expression:"scope.row.goods_imgs[0].path"}],ref:"user_image",staticClass:"ImgCon",attrs:{alt:"",srcset:""},on:{mouseover:function(a){return e.mouseover(t.row.goods_imgs)},mousewheel:function(a){return e.wheel(t.row.goods_imgs)}}}):e._e()])],1)]}}])}),a("el-table-column",{attrs:{fixed:"",prop:"sku",label:"sku","min-width":"100"}}),a("el-table-column",{attrs:{prop:"tracking_num","show-overflow-tooltip":"",label:"运单号","min-width":"100"}}),a("el-table-column",{attrs:{prop:"return_reason_alias","show-overflow-tooltip":"",label:"退货原因"}}),a("el-table-column",{attrs:{prop:"other_reason","show-overflow-tooltip":"",label:"退货其他原因","min-width":"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"refunds",label:"退款金额（美元）","min-width":"130"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"solution_alias",label:"解决方式","min-width":"100"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"solution_alias",label:"退货图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.refunds_imgs_alias.length>0,expression:"scope.row.refunds_imgs_alias.length>0"}]},[a("el-tooltip",{attrs:{placement:"right-start",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.row.refunds_imgs_alias[0],expression:"scope.row.refunds_imgs_alias[0]"}],staticClass:"bigImgCon",attrs:{alt:"",srcset:""}})]),t.row.refunds_imgs_alias[0]?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.row.refunds_imgs_alias[0],expression:"scope.row.refunds_imgs_alias[0]"}],ref:"user_image",staticClass:"ImgCon",attrs:{alt:"",srcset:""},on:{mouseover:function(a){return e.mouseover(t.row.refunds_imgs_alias[0])},mousewheel:function(a){return e.wheel(t.row.refunds_imgs_alias[0])}}}):e._e()])],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"solution_alias",label:"退款截图","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.refunds_imgs_alias.length>0,expression:"scope.row.refunds_imgs_alias.length>0"}]},[a("el-tooltip",{attrs:{placement:"right-start",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.row.refunds_imgs_alias[1],expression:"scope.row.refunds_imgs_alias[1]"}],staticClass:"bigImgCon",attrs:{alt:"",srcset:""}})]),t.row.refunds_imgs_alias[1]?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.row.refunds_imgs_alias[1],expression:"scope.row.refunds_imgs_alias[1]"}],ref:"user_image",staticClass:"ImgCon",attrs:{alt:"",srcset:""},on:{mouseover:function(a){return e.mouseover(t.row.refunds_imgs_alias[1])},mousewheel:function(a){return e.wheel(t.row.refunds_imgs_alias[1])}}}):e._e()])],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"created_at",label:"创建时间","min-width":"100"}}),a("el-table-column",{attrs:{prop:"note","show-overflow-tooltip":"",label:"备注","min-width":"50"}})],1)],1),a("el-dialog",{staticClass:"editWorkOrder",attrs:{title:"编辑工单",visible:e.dialogFormVisible,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"sku","label-width":e.formLabelWidth,prop:"sku"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.sku,callback:function(t){e.$set(e.ruleForm,"sku",t)},expression:"ruleForm.sku"}})],1),a("el-form-item",{attrs:{label:"运单号","label-width":e.formLabelWidth,prop:"tracking_num"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.tracking_num,callback:function(t){e.$set(e.ruleForm,"tracking_num",t)},expression:"ruleForm.tracking_num"}})],1),a("el-form-item",{attrs:{label:"退货原因类别","label-width":e.formLabelWidth,prop:"return_reason"}},[a("el-select",{attrs:{placeholder:"请选择退货原因"},model:{value:e.ruleForm.return_reason,callback:function(t){e.$set(e.ruleForm,"return_reason",t)},expression:"ruleForm.return_reason"}},e._l(e.returnReasonList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"退货其他原因","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.other_reason,callback:function(t){e.$set(e.ruleForm,"other_reason",t)},expression:"ruleForm.other_reason"}})],1),a("el-form-item",{attrs:{label:"最终解决方式","label-width":e.formLabelWidth,prop:"solution"}},[a("el-select",{attrs:{placeholder:"请选择最终解决方式"},model:{value:e.ruleForm.solution,callback:function(t){e.$set(e.ruleForm,"solution",t)},expression:"ruleForm.solution"}},e._l(e.solutionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"退款金额","label-width":e.formLabelWidth,prop:"refunds"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.refunds,callback:function(t){e.$set(e.ruleForm,"refunds",t)},expression:"ruleForm.refunds"}})],1),a("el-form-item",{attrs:{label:"退款/退货截图","label-width":e.formLabelWidth}},[a("uploadFile",{attrs:{uploadFileData:e.uploadFileConOne}})],1),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入备注信息"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submit(e.submitState)}}},[e._v("确 定")])],1)],1)],1)},h=[],g=(a("4de4"),a("4160"),a("a15b"),a("159b"),a("ade3")),p=a("c46c"),f=0,v={data:function(){var e,t=function(e,t,a){""===t?a(new Error("请输入SKU")):a()},a=function(e,t,a){""===t?a(new Error("请填写运单号")):a()},i=function(e,t,a){""===t?a(new Error("请选择退货原因类别")):a()},s=function(e,t,a){""===t?a(new Error("请选择最终解决方式")):a()},l=function(e,t,a){""===t?a(new Error("请填写退款金额")):a()};return e={tableLoading:!1,bigImgSrc:"",total:0,productNum:0,currentPage:1,pagerCount:5,submitState:"add",dialogFormVisible:!1,rules:{name:[{required:!0,message:"标题不能为空"}]},tableData:[],imageList:[],multipleSelection:[],activeName:"first",ruleForm:{sku:"",tracking_num:"",return_reason:"",other_reason:"",solution:"",refunds:"",note:"",image:""},addRuleForm:{},changeRuleForm:{},formLabelWidth:"120px"},Object(g["a"])(e,"rules",{sku:[{validator:t,trigger:"blur"}],tracking_num:[{validator:a,trigger:"blur"}],return_reason:[{validator:i,trigger:"change"}],solution:[{validator:s,trigger:"change"}],refunds:[{validator:l,trigger:"blur"}]}),Object(g["a"])(e,"uploadFileConOne",{limit:2,uploadSrc:"https://jsonplaceholder.typicode.com/posts/",multiple:!1,buttonState:!1,imgList:[],comName:"returnManagement"}),Object(g["a"])(e,"returnReasonList",[{value:"1",label:"质量问题"},{value:"2",label:"物流问题"},{value:"3",label:"包装问题"},{value:"4",label:"色差问题"},{value:"5",label:"其他"}]),Object(g["a"])(e,"solutionList",[{value:"1",label:"全额退款"},{value:"2",label:"部分退款"},{value:"3",label:"补发"},{value:"4",label:"其他"}]),e},methods:{addWorkOrder:function(){this.dialogFormVisible=!0,this.submitState="add"},changeWorkOrder:function(){if(1!=this.multipleSelection.length)this.$message({message:"请选择一条记录进行修改",type:"warning"});else{this.submitState="change",this.uploadFileConOne.imgList=[],this.dialogFormVisible=!0,this.ruleForm=this.multipleSelection[0];for(var e=0;e<this.multipleSelection[0].refunds_imgs_alias.length;e++){var t=this.multipleSelection[0].refunds_imgs_alias[e];this.uploadFileConOne.imgList.push({url:t})}}},wheel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:event;this.bodyMouseWheel(t),(t.wheelDelta>0||t.detail>0)&&(e.length>=f&&f>=0&&(this.bigImgSrc=e[f].path,f--),-1==f&&(f=e.length-1)),(t.wheelDelta<0||t.detail<0)&&(e.length>f&&(this.bigImgSrc=e[f].path,f++),e.length==f&&(f=0))},mouseover:function(e){this.bigImgSrc=e[0].path},bodyMouseWheel:function(e){e.preventDefault()},deleteWorkOrder:function(){var e=this,t=[];if(this.multipleSelection.length<=0)this.$message({message:"请选择需要删除的工单",type:"warning"});else{for(var a=0;a<this.multipleSelection.length;a++){var i=this.multipleSelection[a];t.push(i.id)}this.postRequest("/v1/orderReturnDelete?id=".concat(t.join(","))).then((function(t){"1"==t.data.data?(e.$message({message:"删除成功",type:"success"}),e.initData()):e.$message.error("删除失败")})).catch((function(e){}))}},handleSizeChange:function(e){this.$store.commit("CHANGE_RETURNSHOP_LIMIT",e)},handleCurrentChange:function(e){this.$store.commit("CHANGE_RETURNSHOP_PAGE",e)},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},postImgRequest:function(e){var t=this;if(this.imageList.length>0){var a=new FormData,i=this;a.append("files",this.files);for(var s=0;s<i.imageList.length;s++){var l=i.imageList[s].raw;a.append("image[]",l)}i.imgRequest("/v1/upLoadimgs",a).then((function(t){"200"==t.data.code&&("add"==e&&(i.ruleForm.image=t.data.data),"change"==e&&(""==i.ruleForm.refunds_imgs?i.ruleForm.refunds_imgs=t.data.data:i.ruleForm.refunds_imgs+=",".concat(t.data.data)))})).then((function(){"add"==e&&i.postRequest("/v1/orderReturnAdd?u_id=".concat(sessionStorage.getItem("selectUId")),i.ruleForm).then((function(e){t.dialogFormVisible=!1,"1"==e.data.data.status?(i.$message({message:"添加成功",type:"success"}),i.initData(),i.ruleForm={}):i.$message.error(e.data.data.data)})).catch((function(e){})),"change"==e&&i.postRequest("/v1/orderReturnEdit",i.ruleForm).then((function(e){t.dialogFormVisible=!1,"1"==e.data.data.status?(i.$message({message:"修改成功",type:"success"}),i.initData(),i.ruleForm={}):i.$message.error(e.data.data.data)})).catch((function(e){}))})).catch((function(e){}))}else this.ruleForm.image=""},submit:function(e){"add"==e&&this.addForm("ruleForm"),"change"==e&&this.changeForm("ruleForm")},addForm:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sessionStorage.getItem("selectUId");this.$refs[e].validate((function(e){if(!e)return!1;0!=t.imageList.length?t.postImgRequest("add"):(t.dialogFormVisible=!1,t.postRequest("/v1/orderReturnAdd?u_id=".concat(a),t.ruleForm).then((function(e){"1"==e.data.data.status?(t.$message({message:"添加成功",type:"success"}),t.initData(),t.ruleForm={}):t.$message.error(e.data.data.data)})).catch((function(e){})))}))},changeForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;0!=t.imageList.length?t.postImgRequest("change"):(t.dialogFormVisible=!1,t.postRequest("/v1/orderReturnEdit",t.ruleForm).then((function(e){"1"==e.data.data.status?(t.$message({message:"修改成功",type:"success"}),t.initData(),t.ruleForm={}):t.$message.error(e.data.data.data)})).catch((function(e){})))}))},initData:function(){var e=this;this.tableLoading=!0,this.postRequest("/v1/orderReturnList",this.$store.state.returnShopData).then((function(t){e.tableData=t.data.data.data,e.total=t.data.data.total,e.productNum=t.data.data.count,e.bigImgSrc=t.data.data.data[0]?t.data.data.data[0].goods_imgs[0].path:"",e.tableLoading=!1}))}},created:function(){this.initData()},computed:{limit:function(){return this.$store.state.returnShopData.limit},sku:function(){return this.$store.state.returnShopData.sku},page:function(){return this.$store.state.returnShopData.page},imgData:function(){return this.$store.state.imgListData}},watch:{limit:function(e,t){this.initData()},sku:function(e,t){this.initData()},page:function(e,t){this.initData()},imgData:function(e,t){this.imageList=e;var a=this.imageList.filter((function(e){return"success"==e.status}));a[0].url?this.ruleForm.refunds_imgs=a[0].url:this.ruleForm.refunds_imgs=""}},components:{uploadFile:p["a"]}},b=v,_=(a("2174"),Object(u["a"])(b,d,h,!1,null,"2ba451f8",null)),w=_.exports,F={components:{returnsManagementTop:m,returnsManagementMain:w}},C=F,S=Object(u["a"])(C,i,s,!1,null,null,null);t["default"]=S.exports},dba6:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{placeholder:"账户",size:"mini"},on:{change:e.handleClickUId},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.accountList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)},s=[],l={data:function(){return{accountList:[],value:""}},methods:{getUserList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sessionStorage.getItem("userId");this.postRequest("/v1/merchantLists?u_id=".concat(t)).then((function(t){"200"==t.data.code&&(e.accountList=t.data.data)}))},handleClickUId:function(e){this.$store.commit("CHANGE_SELECT_USER_ID",e),sessionStorage.setItem("selectUId",e)}},created:function(){this.getUserList()}},o=l,r=a("2877"),n=Object(r["a"])(o,i,s,!1,null,null,null);t["a"]=n.exports}}]);
//# sourceMappingURL=chunk-500aa58f.bca80039.js.map